"use strict";(self.webpackChunkpersonal_app=self.webpackChunkpersonal_app||[]).push([[331],{3665:(e,r,a)=>{a.d(r,{A:()=>n});var s=a(9992),o=a(579);const n=(0,s.A)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},4111:(e,r,a)=>{a.d(r,{Hy:()=>n,OI:()=>i,X5:()=>o});var s=a(899);const o=s.Ik({email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido"),password:s.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres").required("La contrase\xf1a es requerida")}),n=(s.Ik({displayName:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre no puede tener m\xe1s de 50 caracteres").required("El nombre es requerido"),email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido"),password:s.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"La contrase\xf1a debe contener al menos una may\xfascula, una min\xfascula y un n\xfamero").required("La contrase\xf1a es requerida"),confirmPassword:s.Yj().oneOf([s.KR("password"),null],"Las contrase\xf1as no coinciden").required("Confirme su contrase\xf1a")}),s.Ik({email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido")}),s.Ik({currentPassword:s.Yj().required("La contrase\xf1a actual es requerida"),newPassword:s.Yj().min(6,"La nueva contrase\xf1a debe tener al menos 6 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"La contrase\xf1a debe contener al menos una may\xfascula, una min\xfascula y un n\xfamero").required("La nueva contrase\xf1a es requerida"),confirmNewPassword:s.Yj().oneOf([s.KR("newPassword"),null],"Las contrase\xf1as no coinciden").required("Confirme su nueva contrase\xf1a")}),s.Ik({dni:s.Yj().matches(/^\d{8}$/,"El DNI debe tener exactamente 8 d\xedgitos").required("El DNI es requerido"),nombres:s.Yj().min(2,"Los nombres deben tener al menos 2 caracteres").max(50,"Los nombres no pueden tener m\xe1s de 50 caracteres").matches(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]+$/,"Los nombres solo pueden contener letras").required("Los nombres son requeridos"),apellidos:s.Yj().min(2,"Los apellidos deben tener al menos 2 caracteres").max(50,"Los apellidos no pueden tener m\xe1s de 50 caracteres").matches(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]+$/,"Los apellidos solo pueden contener letras").required("Los apellidos son requeridos"),celular:s.Yj().matches(/^9\d{8}$/,"El celular debe empezar con 9 y tener 9 d\xedgitos").required("El celular es requerido"),zona:s.Yj().required("La zona es requerida")})),i=s.Ik({nombre:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre no puede tener m\xe1s de 50 caracteres").required("El nombre es requerido"),descripcion:s.Yj().max(200,"La descripci\xf3n no puede tener m\xe1s de 200 caracteres").optional()});s.Ik({nombre:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(100,"El nombre no puede tener m\xe1s de 100 caracteres").required("El nombre es requerido"),descripcion:s.Yj().max(500,"La descripci\xf3n no puede tener m\xe1s de 500 caracteres").optional(),fechaInicio:s.p6().required("La fecha de inicio es requerida"),fechaFin:s.p6().min(s.KR("fechaInicio"),"La fecha de fin debe ser posterior a la de inicio").required("La fecha de fin es requerida"),activa:s.zM().required("El estado es requerido")})},6331:(e,r,a)=>{a.r(r),a.d(r,{default:()=>T});var s=a(5043),o=a(9615),n=a(4858),i=a(8403),t=a(9806),c=a(3969),l=a(4799),d=a(5895),u=a(1449),m=a(6154),p=a(8387),h=a(1807),b=a(7194),v=a(8736),x=a(8700),g=a(8128),f=a(1612),w=a(8301),y=a(9857),j=a(6061);function E(e){return(0,j.Ay)("MuiInputAdornment",e)}const q=(0,y.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var A,L=a(579);const I=(0,g.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:a}=e;return[r.root,r[`position${(0,b.A)(a.position)}`],!0===a.disablePointerEvents&&r.disablePointerEvents,r[a.variant]]}})((0,f.A)(e=>{let{theme:r}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${q.positionStart}&:not(.${q.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),P=s.forwardRef(function(e,r){const a=(0,w.b)({props:e,name:"MuiInputAdornment"}),{children:o,className:n,component:i="div",disablePointerEvents:t=!1,disableTypography:c=!1,position:l,variant:u,...m}=a,g=(0,x.A)()||{};let f=u;u&&g.variant,g&&!f&&(f=g.variant);const y={...a,hiddenLabel:g.hiddenLabel,size:g.size,disablePointerEvents:t,position:l,variant:f},j=(e=>{const{classes:r,disablePointerEvents:a,hiddenLabel:s,position:o,size:n,variant:i}=e,t={root:["root",a&&"disablePointerEvents",o&&`position${(0,b.A)(o)}`,i,s&&"hiddenLabel",n&&`size${(0,b.A)(n)}`]};return(0,h.A)(t,E,r)})(y);return(0,L.jsx)(v.A.Provider,{value:null,children:(0,L.jsx)(I,{as:i,ownerState:y,className:(0,p.A)(j.root,n),ref:r,...m,children:"string"!==typeof o||c?(0,L.jsxs)(s.Fragment,{children:["start"===l?A||(A=(0,L.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,o]}):(0,L.jsx)(d.A,{color:"textSecondary",children:o})})})});var z=a(2579),S=a(2097),C=a(172),Y=a(9992);const M=(0,Y.A)((0,L.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),N=(0,Y.A)((0,L.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");var k=a(3665),$=a(4111),H=a(823),O=a(6667),R=a(6860);const D=new class{async register(e,r,a){try{const s=(await(0,H.eJ)(R.j,e,r)).user;return await(0,H.r7)(s,{displayName:a}),await(0,O.BN)((0,O.H9)(R.db,"users",s.uid),{uid:s.uid,email:s.email,displayName:a,role:"user",createdAt:(0,O.O5)(),isActive:!0}),{success:!0,user:s}}catch(s){return console.error("Error en registro:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,r){try{const s=(await(0,H.x9)(R.j,e,r)).user;try{(await(0,O.x7)((0,O.H9)(R.db,"users",s.uid))).exists()||await(0,O.BN)((0,O.H9)(R.db,"users",s.uid),{uid:s.uid,email:s.email,displayName:s.displayName||s.email,role:"admin",createdAt:(0,O.O5)(),isActive:!0})}catch(a){console.warn("Warning: Could not verify/create user document")}return{success:!0,user:s}}catch(s){return{success:!1,error:this.getErrorMessage(s.code)}}}async resetPassword(e){try{return await(0,H.J1)(R.j,e),{success:!0,message:"Se ha enviado un correo para restablecer la contrase\xf1a"}}catch(r){return console.error("Error al enviar correo de restablecimiento:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async changePassword(e,r){try{const a=R.j.currentUser;if(!a||!a.email)throw new Error("No hay usuario autenticado");const s=H.IX.credential(a.email,e);return await(0,H.kZ)(a,s),await(0,H.f3)(a,r),{success:!0,message:"Contrase\xf1a actualizada exitosamente"}}catch(a){return console.error("Error al cambiar contrase\xf1a:",a),{success:!1,error:this.getErrorMessage(a.code)}}}async getUserData(e){try{const r=await(0,O.x7)((0,O.H9)(R.db,"users",e));return r.exists()?{success:!0,data:r.data()}:{success:!1,error:"Usuario no encontrado"}}catch(r){return console.error("Error al obtener datos del usuario:",r),{success:!1,error:"Error al obtener datos del usuario"}}}getErrorMessage(e){return{"auth/email-already-in-use":"Este correo electr\xf3nico ya est\xe1 registrado","auth/invalid-email":"El correo electr\xf3nico no es v\xe1lido","auth/operation-not-allowed":"Operaci\xf3n no permitida","auth/weak-password":"La contrase\xf1a debe tener al menos 6 caracteres","auth/user-disabled":"Esta cuenta ha sido deshabilitada","auth/user-not-found":"No existe una cuenta con este correo electr\xf3nico","auth/wrong-password":"Contrase\xf1a incorrecta","auth/invalid-credential":"Credenciales inv\xe1lidas","auth/too-many-requests":"Demasiados intentos fallidos. Por favor, intente m\xe1s tarde","auth/requires-recent-login":"Por favor, vuelva a iniciar sesi\xf3n para realizar esta operaci\xf3n","auth/network-request-failed":"Error de conexi\xf3n. Por favor, verifique su conexi\xf3n a internet"}[e]||"Ha ocurrido un error. Por favor, intente nuevamente"}};var Z=a(8807);const T=function(){var e,r;const a=(0,o.Zp)(),{setError:p}=(0,Z.As)(),[h,b]=(0,s.useState)(!1),[v,x]=(0,s.useState)(!1),[g,f]=(0,s.useState)(""),{register:w,handleSubmit:y,formState:{errors:j}}=(0,n.mN)({resolver:(0,i.t)($.X5),defaultValues:{email:"gustavo@sullana.pe",password:"Gustavo25$26"}});return(0,L.jsx)(t.A,{component:"main",maxWidth:"xs",children:(0,L.jsx)(c.A,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,L.jsxs)(l.A,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,L.jsx)(M,{sx:{fontSize:40,color:"primary.main",mb:2}}),(0,L.jsx)(d.A,{component:"h1",variant:"h5",children:"Iniciar Sesi\xf3n"}),(0,L.jsx)(d.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:3},children:"Sistema de Gesti\xf3n Personal"}),g&&(0,L.jsx)(u.A,{severity:"error",sx:{width:"100%",mb:2},children:g}),(0,L.jsxs)(c.A,{component:"form",onSubmit:y(async e=>{console.log("\ud83d\udd0d Datos del formulario:",e),b(!0),f("");try{console.log("\ud83d\ude80 Intentando login con authService...");const r=await D.login(e.email,e.password);console.log("\ud83d\udccb Resultado del authService:",r),r.success?(console.log("\u2705 Login exitoso, redirigiendo..."),a("/dashboard")):(console.log("\u274c Login fall\xf3:",r.error),f(r.error))}catch(r){console.error("\u274c Error en login:",r),f("Ocurri\xf3 un error al iniciar sesi\xf3n")}finally{b(!1)}}),sx:{mt:1,width:"100%"},children:[(0,L.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electr\xf3nico",autoComplete:"email",autoFocus:!0,...w("email"),error:!!j.email,helperText:null===(e=j.email)||void 0===e?void 0:e.message}),(0,L.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,label:"Contrase\xf1a",type:v?"text":"password",id:"password",autoComplete:"current-password",...w("password"),error:!!j.password,helperText:null===(r=j.password)||void 0===r?void 0:r.message,InputProps:{endAdornment:(0,L.jsx)(P,{position:"end",children:(0,L.jsx)(z.A,{"aria-label":"toggle password visibility",onClick:()=>{x(!v)},edge:"end",children:v?(0,L.jsx)(N,{}):(0,L.jsx)(k.A,{})})})}}),(0,L.jsx)(S.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:h,children:h?(0,L.jsx)(C.A,{size:24,color:"inherit"}):"Iniciar Sesi\xf3n"})]})]})})})}}}]);
//# sourceMappingURL=331.635dcd53.chunk.js.map