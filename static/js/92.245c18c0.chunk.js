"use strict";(self.webpackChunkpersonal_app=self.webpackChunkpersonal_app||[]).push([[92],{3665:(e,r,a)=>{a.d(r,{A:()=>o});var s=a(9992),n=a(579);const o=(0,s.A)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},3699:(e,r,a)=>{a.d(r,{A:()=>w});var s=a(5043),n=a(8387),o=a(1807),i=a(7194),t=a(5895),c=a(8736),d=a(8700),l=a(8128),u=a(1612),m=a(8301),p=a(9857),h=a(6061);function b(e){return(0,h.Ay)("MuiInputAdornment",e)}const v=(0,p.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var x,f=a(579);const g=(0,l.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:a}=e;return[r.root,r[`position${(0,i.A)(a.position)}`],!0===a.disablePointerEvents&&r.disablePointerEvents,r[a.variant]]}})((0,u.A)(e=>{let{theme:r}=e;return{display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(r.vars||r).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${v.positionStart}&:not(.${v.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}})),w=s.forwardRef(function(e,r){const a=(0,m.b)({props:e,name:"MuiInputAdornment"}),{children:l,className:u,component:p="div",disablePointerEvents:h=!1,disableTypography:v=!1,position:w,variant:j,...q}=a,y=(0,d.A)()||{};let E=j;j&&y.variant,y&&!E&&(E=y.variant);const A={...a,hiddenLabel:y.hiddenLabel,size:y.size,disablePointerEvents:h,position:w,variant:E},L=(e=>{const{classes:r,disablePointerEvents:a,hiddenLabel:s,position:n,size:t,variant:c}=e,d={root:["root",a&&"disablePointerEvents",n&&`position${(0,i.A)(n)}`,c,s&&"hiddenLabel",t&&`size${(0,i.A)(t)}`]};return(0,o.A)(d,b,r)})(A);return(0,f.jsx)(c.A.Provider,{value:null,children:(0,f.jsx)(g,{as:p,ownerState:A,className:(0,n.A)(L.root,u),ref:r,...q,children:"string"!==typeof l||v?(0,f.jsxs)(s.Fragment,{children:["start"===w?x||(x=(0,f.jsx)("span",{className:"notranslate","aria-hidden":!0,children:"\u200b"})):null,l]}):(0,f.jsx)(t.A,{color:"textSecondary",children:l})})})})},4092:(e,r,a)=>{a.r(r),a.d(r,{default:()=>P});var s=a(5043),n=a(9615),o=a(4858),i=a(8403),t=a(9806),c=a(3969),d=a(4799),l=a(5895),u=a(1449),m=a(4343),p=a(3699),h=a(2579),b=a(2097),v=a(172),x=a(9992),f=a(579);const g=(0,x.A)((0,f.jsx)("path",{d:"M11 7 9.6 8.4l2.6 2.6H2v2h10.2l-2.6 2.6L11 17l5-5zm9 12h-8v2h8c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-8v2h8z"}),"Login"),w=(0,x.A)((0,f.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff");var j=a(3665),q=a(4111),y=a(823),E=a(6667),A=a(6860);const L=new class{async register(e,r,a){try{const s=(await(0,y.eJ)(A.j2,e,r)).user;return await(0,y.r7)(s,{displayName:a}),await(0,E.BN)((0,E.H9)(A.db,"users",s.uid),{uid:s.uid,email:s.email,displayName:a,role:"user",createdAt:(0,E.O5)(),isActive:!0}),{success:!0,user:s}}catch(s){return console.error("Error en registro:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,r){try{const a=await(0,y.x9)(A.j2,e,r);return{success:!0,user:a.user}}catch(a){return{success:!1,error:this.getErrorMessage(a.code)}}}async resetPassword(e){try{return await(0,y.J1)(A.j2,e),{success:!0,message:"Se ha enviado un correo para restablecer la contrase\xf1a"}}catch(r){return console.error("Error al enviar correo de restablecimiento:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async changePassword(e,r){try{const a=A.j2.currentUser;if(!a||!a.email)throw new Error("No hay usuario autenticado");const s=y.IX.credential(a.email,e);return await(0,y.kZ)(a,s),await(0,y.f3)(a,r),{success:!0,message:"Contrase\xf1a actualizada exitosamente"}}catch(a){return console.error("Error al cambiar contrase\xf1a:",a),{success:!1,error:this.getErrorMessage(a.code)}}}async getUserData(e){try{const r=await(0,E.x7)((0,E.H9)(A.db,"users",e));return r.exists()?{success:!0,data:r.data()}:{success:!1,error:"Usuario no encontrado"}}catch(r){return console.error("Error al obtener datos del usuario:",r),{success:!1,error:"Error al obtener datos del usuario"}}}getErrorMessage(e){return{"auth/email-already-in-use":"Este correo electr\xf3nico ya est\xe1 registrado","auth/invalid-email":"El correo electr\xf3nico no es v\xe1lido","auth/operation-not-allowed":"Operaci\xf3n no permitida","auth/weak-password":"La contrase\xf1a debe tener al menos 6 caracteres","auth/user-disabled":"Esta cuenta ha sido deshabilitada","auth/user-not-found":"No existe una cuenta con este correo electr\xf3nico","auth/wrong-password":"Contrase\xf1a incorrecta","auth/invalid-credential":"Credenciales inv\xe1lidas","auth/too-many-requests":"Demasiados intentos fallidos. Por favor, intente m\xe1s tarde","auth/requires-recent-login":"Por favor, vuelva a iniciar sesi\xf3n para realizar esta operaci\xf3n","auth/network-request-failed":"Error de conexi\xf3n. Por favor, verifique su conexi\xf3n a internet"}[e]||"Ha ocurrido un error. Por favor, intente nuevamente"}};var I=a(8807);const P=function(){var e,r;const a=(0,n.Zp)(),{setError:x}=(0,I.As)(),[y,E]=(0,s.useState)(!1),[A,P]=(0,s.useState)(!1),[z,S]=(0,s.useState)(""),{register:Y,handleSubmit:C,formState:{errors:M}}=(0,o.mN)({resolver:(0,i.t)(q.X5),defaultValues:{email:"",password:""}});return(0,f.jsx)(t.A,{component:"main",maxWidth:"xs",children:(0,f.jsx)(c.A,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,f.jsxs)(d.A,{elevation:3,sx:{padding:4,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:[(0,f.jsx)(g,{sx:{fontSize:40,color:"primary.main",mb:2}}),(0,f.jsx)(l.A,{component:"h1",variant:"h5",children:"Iniciar Sesi\xf3n"}),(0,f.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:3},children:"Sistema de Gesti\xf3n Personal"}),z&&(0,f.jsx)(u.A,{severity:"error",sx:{width:"100%",mb:2},children:z}),(0,f.jsxs)(c.A,{component:"form",onSubmit:C(async e=>{console.log("\ud83d\udd0d Datos del formulario:",e),E(!0),S("");try{console.log("\ud83d\ude80 Intentando login con authService...");const r=await L.login(e.email,e.password);console.log("\ud83d\udccb Resultado del authService:",r),r.success?(console.log("\u2705 Login exitoso, redirigiendo..."),a("/dashboard")):(console.log("\u274c Login fall\xf3:",r.error),S(r.error))}catch(r){console.error("\u274c Error en login:",r),S("Ocurri\xf3 un error al iniciar sesi\xf3n")}finally{E(!1)}}),sx:{mt:1,width:"100%"},children:[(0,f.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo Electr\xf3nico",autoComplete:"email",autoFocus:!0,...Y("email"),error:!!M.email,helperText:null===(e=M.email)||void 0===e?void 0:e.message}),(0,f.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,label:"Contrase\xf1a",type:A?"text":"password",id:"password",autoComplete:"current-password",...Y("password"),error:!!M.password,helperText:null===(r=M.password)||void 0===r?void 0:r.message,InputProps:{endAdornment:(0,f.jsx)(p.A,{position:"end",children:(0,f.jsx)(h.A,{"aria-label":"toggle password visibility",onClick:()=>{P(!A)},edge:"end",children:A?(0,f.jsx)(w,{}):(0,f.jsx)(j.A,{})})})}}),(0,f.jsx)(b.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:y,children:y?(0,f.jsx)(v.A,{size:24,color:"inherit"}):"Iniciar Sesi\xf3n"})]})]})})})}},4111:(e,r,a)=>{a.d(r,{Hy:()=>o,OI:()=>i,X5:()=>n});var s=a(899);const n=s.Ik({email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido"),password:s.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres").required("La contrase\xf1a es requerida")}),o=(s.Ik({displayName:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre no puede tener m\xe1s de 50 caracteres").required("El nombre es requerido"),email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido"),password:s.Yj().min(6,"La contrase\xf1a debe tener al menos 6 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"La contrase\xf1a debe contener al menos una may\xfascula, una min\xfascula y un n\xfamero").required("La contrase\xf1a es requerida"),confirmPassword:s.Yj().oneOf([s.KR("password"),null],"Las contrase\xf1as no coinciden").required("Confirme su contrase\xf1a")}),s.Ik({email:s.Yj().email("Correo electr\xf3nico inv\xe1lido").required("El correo electr\xf3nico es requerido")}),s.Ik({currentPassword:s.Yj().required("La contrase\xf1a actual es requerida"),newPassword:s.Yj().min(6,"La nueva contrase\xf1a debe tener al menos 6 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"La contrase\xf1a debe contener al menos una may\xfascula, una min\xfascula y un n\xfamero").required("La nueva contrase\xf1a es requerida"),confirmNewPassword:s.Yj().oneOf([s.KR("newPassword"),null],"Las contrase\xf1as no coinciden").required("Confirme su nueva contrase\xf1a")}),s.Ik({dni:s.Yj().matches(/^\d{8}$/,"El DNI debe tener exactamente 8 d\xedgitos").required("El DNI es requerido"),nombres:s.Yj().min(2,"Los nombres deben tener al menos 2 caracteres").max(50,"Los nombres no pueden tener m\xe1s de 50 caracteres").matches(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]+$/,"Los nombres solo pueden contener letras").required("Los nombres son requeridos"),apellidos:s.Yj().min(2,"Los apellidos deben tener al menos 2 caracteres").max(50,"Los apellidos no pueden tener m\xe1s de 50 caracteres").matches(/^[a-zA-Z\xe1\xe9\xed\xf3\xfa\xc1\xc9\xcd\xd3\xda\xf1\xd1\s]+$/,"Los apellidos solo pueden contener letras").required("Los apellidos son requeridos"),celular:s.Yj().matches(/^9\d{8}$/,"El celular debe empezar con 9 y tener 9 d\xedgitos").required("El celular es requerido"),zona:s.Yj().required("La zona es requerida"),direccion:s.Yj().min(5,"La direcci\xf3n debe tener al menos 5 caracteres").max(100,"La direcci\xf3n no puede tener m\xe1s de 100 caracteres").required("La direcci\xf3n es requerida"),fechaJuramentacion:s.p6().max(new Date,"La fecha de juramentaci\xf3n no puede ser futura").required("La fecha de juramentaci\xf3n es requerida")})),i=s.Ik({nombre:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(50,"El nombre no puede tener m\xe1s de 50 caracteres").required("El nombre es requerido"),descripcion:s.Yj().max(200,"La descripci\xf3n no puede tener m\xe1s de 200 caracteres").optional()});s.Ik({nombre:s.Yj().min(3,"El nombre debe tener al menos 3 caracteres").max(100,"El nombre no puede tener m\xe1s de 100 caracteres").required("El nombre es requerido"),descripcion:s.Yj().max(500,"La descripci\xf3n no puede tener m\xe1s de 500 caracteres").optional(),fechaInicio:s.p6().required("La fecha de inicio es requerida"),fechaFin:s.p6().min(s.KR("fechaInicio"),"La fecha de fin debe ser posterior a la de inicio").required("La fecha de fin es requerida"),activa:s.zM().required("El estado es requerido")})}}]);
//# sourceMappingURL=92.245c18c0.chunk.js.map